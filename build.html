d<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">

	<title>Build, by AndrewChen</title>

	<script src="./jquery-2.1.3.min.js"></script>
	<script src="./config.js"></script>

</head>

<body>

<script>

	$(document).ready(function(){

		console.log('init data...');

		var frames = '';
		var myFrame = '<iframe id="test" src="http://localhost:8080/?name=@url" frameborder="0"></iframe>';

		for (var i = config.length - 1; i >= 0; i--) {
			frames += myFrame.replace("@url", config[i]);
		};

		$('body').append(frames);

		//=====================================

		console.log('start crawl');

		for (var i = config.length - 1; i >= 0; i--) {

			var name = config[i];

			$.ajax({
				url: 'http://localhost:8080/?name=' + name,
				type: 'GET',
				contentType: 'text/plain',

				success: function( result ){

					//create
					$.ajax({
						url: 'http://localhost:8080',
						type: 'POST',
						data : { name: name, data: result },

						success: function( result ){
							console.log('create page: ', name + '.html')
						},
						error: function(err){
							console.log('error', err)
						}
					});

				},
				error: function(err){
					console.log('error', err)
				}
			});

		};

	});

</script>

	<p>build static html page...</p>

</body>

</html>